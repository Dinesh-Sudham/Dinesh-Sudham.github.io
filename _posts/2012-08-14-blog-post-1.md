---
title: 'RDMA QoS'
date: 2024-10-5
permalink: /posts/2012/08/blog-post-1/
tags:
  - cool posts
  - category1
  - category2
---

## What is RoCE?
RDMA over Converged Ethernet (RoCE – pronounced “Rocky”) is a network protocol that allows Remote Direct Memory Access (RDMA) over an Ethernet network. It does this by an encapsulation of an InfiniBand transport packet over Ethernet. There are two different RoCE versions:

## What us QoS?
QoS is a mechanism that assigns a priority to a netwrok flow and manages it's minimum requirments, reliable performece  and it's priority service compared to other network flows.

## How does the HW clasify Network Flow to ensure give each flow different priorities?
For IP/Ethernet, there are two ways to classify network traffic:

By using PCP bits on the VLAN header(Layer2)
By using DSCP bits on the IP header(Layer2)

## RoCEv2 packet format
![image](https://github.com/user-attachments/assets/a1f14f85-3425-4cd2-bd06-141095db6cca)

Ethernet frames are marked by specifying the 802.1p user priority (CoS) of 802.1Q header. The Layer 2 Ethernet frame has only eight types of services (from 0 to 7), which are:

## Ethernet data frame
![image](https://github.com/user-attachments/assets/b55b9e34-06af-491b-a2c2-84a7e4f8b17e)


## CoS value/IP precedence	Application
7                         Reserved
6                         Reserved
5                         Voice
4                         Video Conference
3                         Call Signaling
2                         High-priority Data
1                         Medium-priority Data
0                         Best-effort Data



